## 基础概念

`git`有三个分区，分别是：

- 工作区（**Working Directory**）：开发者直接编辑的地方，只要文件发生了更改，在这就会显示出来，包含追踪与未追踪文件。通过`git add`将工作区文件添加到暂存区。
- 暂存区（**Stage | Index**）：数据暂时存放的区域，通过`git commit`将暂存区文件添加到本地版本库。
- 本地版本库（**Local Commit History**）：存放所有已经提交的数据，通过`git push`推送到远程仓库。

![image-20220807194628700](../../assets/github/image-20220807194628700.png)

## 1.放弃工作区所作的修改

* `git restore <file>...`:放弃特定文件的修改
* `git checkout .` 或者 `git checkout head .`：放弃所有文件的修改
* `git checkout *.后缀` 或者 `git checkout head *.后缀`：撤销尚未提交的单个后缀文件

## 2.branch 分支操作

`git `命令行中一些参数选项解释:

```sh
-d 或者 --delete：删除

-D 或者 --delete --force：强制删除

-f 或者 --force：强制

-m 或者 --move：移动或重命名

-M 或者 --move --force：强制移动或重命名

-r 或者 --remote：远程

-a 或者 --all：所有
```

### 1. 创建新分支

1. `git branch <branch-name>`

2. `git checkout -b <new_branch_name>`：创建本地分支并切换到该分支

   该命令等同于：

   ```sh
   $ git branch <new_branch_name>  或者 git branch <new_branch_name> <base_branch_name>
   $ git checkout <new_branch_name> 
   ```

3. `git branch <new-branch> <base-branch>`：基于**某个分支**开出新分支

4. `git branch <new-branch> <commit_hash>`：基于**某个提交**开出新分支

5. `git branch <new-branch> v1.1`：基于**某个tag**开出有新分支

创建新分支之后，需要将该分支推送到远程： `git push --set-upstream origin <远程分支名>`

### 2. 删除分支

* 删除**本地**分支：`git branch -D <branch-name>`
* 删除**远程**分支：**`git push -d origin <branch-name>`**
* 删除**本地和远程**分支，删除后还需推送到服务器：
  1. `git branch -d -r <branchname>` 
  2. `git push origin:<branchname> `

### 3. 重命名分支

- `git branch -m <oldbranch> <newbranch>` ：重命名**本地**分支

### 4. 查看分支

- `git branch`

  查看列出本地所有分支，同时以`*`确认当前所在分支

  - `git branch -a`

    查看列出 本地及远程 所有分支，同时以`*`确认当前所在分支

  - `git branch -r`

    查看列出 远程所有分支

- `git log --graph`

  以图表形式查看分支

### 5. 合并分支

* `git merge --no-ff branch_name`：在历史记录中明确记录下本次分支合并

* 合并远程分支新内容

  1. 将分支切换到`branch-one`
  
    `git checkout branch-one`
  
  2. 将代码`pull`到本地
  
    `git pull`
  
  3. 修改冲突
  
  4. 提交到本地
  
    `git add .
    git commit -m "merge"`
  
  5. 切换到你所在分支`branch-two`
  
    `git checkout branch-two`
  
  6. merge
  
    `git merge branch-one`
  
  7. 将本地内容push到dev分支
  
    `git push`

## 3.remote 源地址操作

* `git remote -v`：查看项目源地址

  ```shell
  $ git remote -v
  origin  git@github.com:refinec/FrontEndNotes.git (fetch)
  origin  git@github.com:refinec/FrontEndNotes.git (push) 
  ```

* `git remote add <origin_name> <origin_url>`: 添加一个源地址为要提交的仓库地址

* `git remove remote <origin_name>`: 删除源地址

  ```shell
  $ git remote remove origin
  ```

添加完源地址后，推送分支：

```shell
$ git push -u origin feature-D
```

**`-u` 参数** 可以在推送的同时，将 origin 仓库的 feature-D 分支设置为本地仓库当前分支的 upstream（上游）。添加了这个参数，将来运行 `git pull` 命令从远程仓库获取内容时，本地仓库的这个分支就可以直接从 origin 的 feature-D 分支获取内容，省去了另外添加参数的麻烦。

