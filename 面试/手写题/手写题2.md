##  promise

### å®ç°promise

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­â­)

[å‚è€ƒä»£ç ](https://juejin.cn/post/6945319439772434469#heading-15)

### å®ç°promise.all

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­â­)

```js
function PromiseAll(promises){
    return new Promise((resolve, reject)=>{
        if(!Array.isArray(promises)){
            throw new TypeError("promises must be an array")
        }
        let result = [] 
        let count = 0 
        promises.forEach((promise, index) => {
            promise.then((res)=>{
                result[index] = res
                count++
                count === promises.length && resolve(result) 
            }, (err)=>{
                reject(err)
            })
        })
    })
}


å¤åˆ¶ä»£ç 
```

### å®ç° promise.finally

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­â­)

```js
Promise.prototype.finally = function (cb) {
  return this.then(function (value) {
    return Promise.resolve(cb()).then(function () {
      return value
    })
  }, function (err) {
    return Promise.resolve(cb()).then(function () {
      throw err
    })
  })
}

å¤åˆ¶ä»£ç 
```

### å®ç°promise.allSettled

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­)

```js
function allSettled(promises) {
  if (promises.length === 0) return Promise.resolve([])
  
  const _promises = promises.map(
    item => item instanceof Promise ? item : Promise.resolve(item)
    )
  
  return new Promise((resolve, reject) => {
    const result = []
    let unSettledPromiseCount = _promises.length
    
    _promises.forEach((promise, index) => {
      promise.then((value) => {
        result[index] = {
          status: 'fulfilled',
          value
        }
        
        unSettledPromiseCount -= 1
        // resolve after all are settled
        if (unSettledPromiseCount === 0) {
          resolve(result)
        }
      }, (reason) => {
        result[index] = {
          status: 'rejected',
          reason
        }
        
        unSettledPromiseCount -= 1
        // resolve after all are settled
        if (unSettledPromiseCount === 0) {
          resolve(result)
        }
      })
    })
  })
}
å¤åˆ¶ä»£ç 
```

### å®ç°promise.race

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­)

```js
Promise.race = function(promiseArr) {
    return new Promise((resolve, reject) => {
        promiseArr.forEach(p => {
            Promise.resolve(p).then(val => {
                resolve(val)
            }, err => {
                rejecte(err)
            })
        })
    })
}
å¤åˆ¶ä»£ç 
```

### æ¥è¯´ä¸€ä¸‹å¦‚ä½•ä¸²è¡Œæ‰§è¡Œå¤šä¸ªPromise

[å‚è€ƒä»£ç ](https://juejin.cn/post/6844903801296519182)

### promise.any

```js
Promise.any = function(promiseArr) {
    let index = 0
    return new Promise((resolve, reject) => {
        if (promiseArr.length === 0) return 
        promiseArr.forEach((p, i) => {
            Promise.resolve(p).then(val => {
                resolve(val)
                
            }, err => {
                index++
                if (index === promiseArr.length) {
                  reject(new AggregateError('All promises were rejected'))
                }
            })
        })
    })
}


å¤åˆ¶ä»£ç 
```

### resolve

```js
Promise.resolve = function(value) {
    if(value instanceof Promise){
        return value
    }
    return new Promise(resolve => resolve(value))
}

å¤åˆ¶ä»£ç 
```

### reject

```js
Promise.reject = function(reason) {
    return new Promise((resolve, reject) => reject(reason))
}
å¤åˆ¶ä»£ç 
```

## ğŸ³ Arrayç¯‡

### æ•°ç»„å»é‡

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­â­)

#### ä½¿ç”¨åŒé‡ `for` å’Œ `splice`

```js
function unique(arr){            
    for(var i=0; i<arr.length; i++){
        for(var j=i+1; j<arr.length; j++){
            if(arr[i]==arr[j]){         
            //ç¬¬ä¸€ä¸ªç­‰åŒäºç¬¬äºŒä¸ªï¼Œspliceæ–¹æ³•åˆ é™¤ç¬¬äºŒä¸ª
                arr.splice(j,1);
                // åˆ é™¤åæ³¨æ„å›è°ƒj
                j--;
            }
        }
    }
return arr;
}
```

#### ä½¿ç”¨ `indexOf` æˆ– `includes` åŠ æ–°æ•°ç»„

```js
//ä½¿ç”¨indexof
function unique(arr) {
    var uniqueArr = []; // æ–°æ•°ç»„
    for (let i = 0; i < arr.length; i++) {
        if (uniqueArr.indexOf(arr[i]) === -1) {
            //indexofè¿”å›-1è¡¨ç¤ºåœ¨æ–°æ•°ç»„ä¸­ä¸å­˜åœ¨è¯¥å…ƒç´ 
            uniqueArr.push(arr[i])//æ˜¯æ–°æ•°ç»„é‡Œæ²¡æœ‰çš„å…ƒç´ å°±pushå…¥
        }
    }
    return uniqueArr;
}
// ä½¿ç”¨includes
function unique(arr) {
    var uniqueArr = []; 
    for (let i = 0; i < arr.length; i++) {
        //includes æ£€æµ‹æ•°ç»„æ˜¯å¦æœ‰æŸä¸ªå€¼
        if (!uniqueArr.includes(arr[i])) {
            uniqueArr.push(arr[i])//
        }
    }
    return uniqueArr;
}
å¤åˆ¶ä»£ç 
```

#### `sort` æ’åºåï¼Œä½¿ç”¨å¿«æ…¢æŒ‡é’ˆçš„æ€æƒ³

```js
function unique(arr) {
    arr.sort((a, b) => a - b);
    var slow = 1,
        fast = 1;
    while (fast < arr.length) {
        if (arr[fast] != arr[fast - 1]) {
            arr[slow ++] = arr[fast];
        }
        ++ fast;
    }
    arr.length = slow;
    return arr;
}
å¤åˆ¶ä»£ç 
```

`sort` æ–¹æ³•ç”¨äºä»å°åˆ°å¤§æ’åº(è¿”å›ä¸€ä¸ªæ–°æ•°ç»„)ï¼Œå…¶å‚æ•°ä¸­ä¸å¸¦ä»¥ä¸Šå›è°ƒå‡½æ•°å°±ä¼šåœ¨ä¸¤ä½æ•°åŠä»¥ä¸Šæ—¶å‡ºç°æ’åºé”™è¯¯(å¦‚æœçœç•¥ï¼Œå…ƒç´ æŒ‰ç…§è½¬æ¢ä¸ºçš„å­—ç¬¦ä¸²çš„å„ä¸ªå­—ç¬¦çš„ `Unicode` ä½ç‚¹è¿›è¡Œæ’åºã€‚ä¸¤ä½æ•°ä¼šå˜ä¸ºé•¿åº¦ä¸ºäºŒçš„å­—ç¬¦ä¸²æ¥è®¡ç®—)ã€‚

#### `ES6` æä¾›çš„ `Set` å»é‡

```js
function unique(arr) {
    const result = new Set(arr);
    return [...result];
    //ä½¿ç”¨æ‰©å±•è¿ç®—ç¬¦å°†Setæ•°æ®ç»“æ„è½¬ä¸ºæ•°ç»„
}
å¤åˆ¶ä»£ç 
```

`Set` ä¸­çš„å…ƒç´ åªä¼šå‡ºç°ä¸€æ¬¡ï¼Œå³ `Set` ä¸­çš„å…ƒç´ æ˜¯å”¯ä¸€çš„ã€‚

#### ä½¿ç”¨å“ˆå¸Œè¡¨å­˜å‚¨å…ƒç´ æ˜¯å¦å‡ºç°(`ES6` æä¾›çš„ `map`)

```js
function unique(arr) {
    let map = new Map();
    let uniqueArr = new Array();  // æ•°ç»„ç”¨äºè¿”å›ç»“æœ
    for (let i = 0; i < arr.length; i++) {
      if(map.has(arr[i])) {  // å¦‚æœæœ‰è¯¥keyå€¼
        map.set(arr[i], true); 
      } else { 
        map.set(arr[i], false);   // å¦‚æœæ²¡æœ‰è¯¥keyå€¼
        uniqueArr.push(arr[i]);
      }
    } 
    return uniqueArr ;
}
å¤åˆ¶ä»£ç 
```

`map` å¯¹è±¡ä¿å­˜é”®å€¼å¯¹ï¼Œä¸å¯¹è±¡ç±»ä¼¼ã€‚ä½† `map` çš„é”®å¯ä»¥æ˜¯ä»»æ„ç±»å‹ï¼Œå¯¹è±¡çš„é”®åªèƒ½æ˜¯å­—ç¬¦ä¸²ç±»å‹ã€‚

å¦‚æœæ•°ç»„ä¸­åªæœ‰æ•°å­—ä¹Ÿå¯ä»¥ä½¿ç”¨æ™®é€šå¯¹è±¡ä½œä¸ºå“ˆå¸Œè¡¨ã€‚

#### `filter` é…åˆ `indexOf`

```js
function unique(arr) {
    return arr.filter(function (item, index, arr) {
        //å½“å‰å…ƒç´ ï¼Œåœ¨åŸå§‹æ•°ç»„ä¸­çš„ç¬¬ä¸€ä¸ªç´¢å¼•==å½“å‰ç´¢å¼•å€¼ï¼Œå¦åˆ™è¿”å›å½“å‰å…ƒç´ 
        //ä¸æ˜¯é‚£ä¹ˆå°±è¯æ˜æ˜¯é‡å¤é¡¹ï¼Œå°±èˆå¼ƒ
        return arr.indexOf(item) === index;
    })
}
å¤åˆ¶ä»£ç 
```

è¿™é‡Œæœ‰å¯èƒ½å­˜åœ¨ç–‘é—®ï¼Œæˆ‘æ¥ä¸¾ä¸ªä¾‹å­ï¼š

```js
const arr = [1,1,2,1,3]
arr.indexOf(arr[0]) === 0 // 1 çš„ç¬¬ä¸€æ¬¡å‡ºç°
arr.indexOf(arr[1]) !== 1 // è¯´æ˜å‰é¢æ›¾ç»å‡ºç°è¿‡1
å¤åˆ¶ä»£ç 
```

#### `reduce` é…åˆ `includes`

```js
function unique(arr){
    let uniqueArr = arr.reduce((acc,cur)=>{
        if(!acc.includes(cur)){
            acc.push(cur);
        }
        return acc;
    },[]) // []ä½œä¸ºå›è°ƒå‡½æ•°çš„ç¬¬ä¸€ä¸ªå‚æ•°çš„åˆå§‹å€¼
    return uniqueArr
}
å¤åˆ¶ä»£ç 
```

### æ•°ç»„æ‰å¹³åŒ–

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­)

[å‚è€ƒä»£ç ](https://juejin.cn/post/6844904025993773063#heading-14)

### forEach

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­)

```js
Array.prototype.myForEach = function (callbackFn) {
    // åˆ¤æ–­thisæ˜¯å¦åˆæ³•
    if (this === null || this === undefined) {
        throw new TypeError("Cannot read property 'myForEach' of null");
    }
    // åˆ¤æ–­callbackFnæ˜¯å¦åˆæ³•
    if (Object.prototype.toString.call(callbackFn) !== "[object Function]") {
        throw new TypeError(callbackFn + ' is not a function')
    }
    // å–åˆ°æ‰§è¡Œæ–¹æ³•çš„æ•°ç»„å¯¹è±¡å’Œä¼ å…¥çš„thiså¯¹è±¡
    var _arr = this, thisArg = arguments[1] || window;
    for (var i = 0; i < _arr.length; i++) {
        // æ‰§è¡Œå›è°ƒå‡½æ•°
        callbackFn.call(thisArg, _arr[i], i, _arr);
    }
}


å¤åˆ¶ä»£ç 
```

### reduce

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­)

```js
Array.prototype.myReduce = function(callbackFn) {
    var _arr = this, accumulator = arguments[1];
    var i = 0;
    // åˆ¤æ–­æ˜¯å¦ä¼ å…¥åˆå§‹å€¼
    if (accumulator === undefined) {
        // æ²¡æœ‰åˆå§‹å€¼çš„ç©ºæ•°ç»„è°ƒç”¨reduceä¼šæŠ¥é”™
        if (_arr.length === 0) {
            throw new Error('initVal and Array.length>0 need one')
        }
        // åˆå§‹å€¼èµ‹å€¼ä¸ºæ•°ç»„ç¬¬ä¸€ä¸ªå…ƒç´ 
        accumulator = _arr[i];
        i++;
    }
    for (; i<_arr.length; i++) {
        // è®¡ç®—ç»“æœèµ‹å€¼ç»™åˆå§‹å€¼
        accumulator = callbackFn(accumulator,  _arr[i], i, _arr)
    }
    return accumulator;
}

å¤åˆ¶ä»£ç 
```

### map

```js
Array.prototype.myMap = function(callbackFn) {
    var _arr = this, thisArg = arguments[1] || window, res = [];
    for (var i = 0; i<_arr.length; i++) {
        // å­˜å‚¨è¿ç®—ç»“æœ
        res.push(callbackFn.call(thisArg, _arr[i], i, _arr));
    }
    return res;
}

å¤åˆ¶ä»£ç 
```

### filter

```js
Array.prototype.myFilter = function(callbackFn) {
    var _arr = this, thisArg = arguments[1] || window, res = [];
    for (var i = 0; i<_arr.length; i++) {
        // å›è°ƒå‡½æ•°æ‰§è¡Œä¸ºtrue
        if (callbackFn.call(thisArg, _arr[i], i, _arr)) {
            res.push(_arr[i]);
        }
    }
    return res;
}
å¤åˆ¶ä»£ç 
```

### every

```js
Array.prototype.myEvery = function(callbackFn) {
    var _arr = this, thisArg = arguments[1] || window;
    // å¼€å§‹æ ‡è¯†å€¼ä¸ºtrue
    // é‡åˆ°å›è°ƒè¿”å›falseï¼Œç›´æ¥è¿”å›false
    // å¦‚æœå¾ªç¯æ‰§è¡Œå®Œæ¯•ï¼Œæ„å‘³ç€æ‰€æœ‰å›è°ƒè¿”å›å€¼ä¸ºtrueï¼Œæœ€ç»ˆç»“æœä¸ºtrue
    var flag = true;
    for (var i = 0; i<_arr.length; i++) {
        // å›è°ƒå‡½æ•°æ‰§è¡Œä¸ºfalseï¼Œå‡½æ•°ä¸­æ–­
        if (!callbackFn.call(thisArg, _arr[i], i, _arr)) {
            return false;
        }
    }
    return flag;
}
å¤åˆ¶ä»£ç 
```

### some

```js
Array.prototype.mySome = function(callbackFn) {
    var _arr = this, thisArg = arguments[1] || window;
    // å¼€å§‹æ ‡è¯†å€¼ä¸ºfalse
    // é‡åˆ°å›è°ƒè¿”å›trueï¼Œç›´æ¥è¿”å›true
    // å¦‚æœå¾ªç¯æ‰§è¡Œå®Œæ¯•ï¼Œæ„å‘³ç€æ‰€æœ‰å›è°ƒè¿”å›å€¼ä¸ºfalseï¼Œæœ€ç»ˆç»“æœä¸ºfalse
    var flag = false;
    for (var i = 0; i<_arr.length; i++) {
        // å›è°ƒå‡½æ•°æ‰§è¡Œä¸ºfalseï¼Œå‡½æ•°ä¸­æ–­
        if (callbackFn.call(thisArg, _arr[i], i, _arr)) {
            return true;
        }
    }
    return flag;
}
å¤åˆ¶ä»£ç 
```

### find/findIndex

```js
Array.prototype.myFind = function(callbackFn) {
    var _arr = this, thisArg = arguments[1] || window;
    // é‡åˆ°å›è°ƒè¿”å›trueï¼Œç›´æ¥è¿”å›è¯¥æ•°ç»„å…ƒç´ 
    // å¦‚æœå¾ªç¯æ‰§è¡Œå®Œæ¯•ï¼Œæ„å‘³ç€æ‰€æœ‰å›è°ƒè¿”å›å€¼ä¸ºfalseï¼Œæœ€ç»ˆç»“æœä¸ºundefined
    for (var i = 0; i<_arr.length; i++) {
        // å›è°ƒå‡½æ•°æ‰§è¡Œä¸ºfalseï¼Œå‡½æ•°ä¸­æ–­
        if (callbackFn.call(thisArg, _arr[i], i, _arr)) {
            return _arr[i];
        }
    }
    return undefined;
}
å¤åˆ¶ä»£ç 
```

### indexOf

```js
function indexOf(findVal, beginIndex = 0) {
    if (this.length < 1 || beginIndex > findVal.length) {
        return -1;
    }
    if (!findVal) {
        return 0;
    }
    beginIndex = beginIndex <= 0 ? 0 : beginIndex;
    for (let i = beginIndex; i < this.length; i++) {
        if (this[i] == findVal) return i;
    }
    return -1;
}
      

å¤åˆ¶ä»£ç 
```

### å®ç°sort

[å‚è€ƒä»£ç ](https://juejin.cn/post/6844903986479251464#heading-33)

## ğŸŒŠ é˜²æŠ–èŠ‚æµ

### å®ç°é˜²æŠ–å‡½æ•°debounce

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­â­)

```js
function debounce(func, wait, immediate) {

    var timeout, result;

    var debounced = function () {
        var context = this;
        var args = arguments;

        if (timeout) clearTimeout(timeout);
        if (immediate) {
            // å¦‚æœå·²ç»æ‰§è¡Œè¿‡ï¼Œä¸å†æ‰§è¡Œ
            var callNow = !timeout;
            timeout = setTimeout(function(){
                timeout = null;
            }, wait)
            if (callNow) result = func.apply(context, args)
        }
        else {
            timeout = setTimeout(function(){
                result = func.apply(context, args)
            }, wait);
        }
        return result;
    };

    debounced.cancel = function() {
        clearTimeout(timeout);
        timeout = null;
    };

    return debounced;
}
```

### å®ç°èŠ‚æµå‡½æ•°throttle

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­â­)

```js
// ç¬¬å››ç‰ˆ
function throttle(func, wait, options) {
    var timeout, context, args, result;
    var previous = 0;
    if (!options) options = {};

    var later = function() {
        previous = options.leading === false ? 0 : new Date().getTime();
        timeout = null;
        func.apply(context, args);
        if (!timeout) context = args = null;
    };

    var throttled = function() {
        var now = new Date().getTime();
        if (!previous && options.leading === false) previous = now;
        var remaining = wait - (now - previous);
        context = this;
        args = arguments;
        if (remaining <= 0 || remaining > wait) {
            if (timeout) {
                clearTimeout(timeout);
                timeout = null;
            }
            previous = now;
            func.apply(context, args);
            if (!timeout) context = args = null;
        } else if (!timeout && options.trailing !== false) {
            timeout = setTimeout(later, remaining);
        }
    };
    return throttled;
}
```

## â›² Objectç¯‡

### èƒ½ä¸èƒ½å†™ä¸€ä¸ªå®Œæ•´çš„æ·±æ‹·è´

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­â­)

```js
const getType = obj => Object.prototype.toString.call(obj);

const isObject = (target) => (typeof target === 'object' || typeof target === 'function') && target !== null;

const canTraverse = {
  '[object Map]': true,
  '[object Set]': true,
  '[object Array]': true,
  '[object Object]': true,
  '[object Arguments]': true,
};
const mapTag = '[object Map]';
const setTag = '[object Set]';
const boolTag = '[object Boolean]';
const numberTag = '[object Number]';
const stringTag = '[object String]';
const symbolTag = '[object Symbol]';
const dateTag = '[object Date]';
const errorTag = '[object Error]';
const regexpTag = '[object RegExp]';
const funcTag = '[object Function]';

const handleRegExp = (target) => {
  const { source, flags } = target;
  return new target.constructor(source, flags);
}

const handleFunc = (func) => {
  // ç®­å¤´å‡½æ•°ç›´æ¥è¿”å›è‡ªèº«
  if(!func.prototype) return func;
  const bodyReg = /(?<={)(.|\n)+(?=})/m;
  const paramReg = /(?<=\().+(?=\)\s+{)/;
  const funcString = func.toString();
  // åˆ†åˆ«åŒ¹é… å‡½æ•°å‚æ•° å’Œ å‡½æ•°ä½“
  const param = paramReg.exec(funcString);
  const body = bodyReg.exec(funcString);
  if(!body) return null;
  if (param) {
    const paramArr = param[0].split(',');
    return new Function(...paramArr, body[0]);
  } else {
    return new Function(body[0]);
  }
}

const handleNotTraverse = (target, tag) => {
  const Ctor = target.constructor;
  switch(tag) {
    case boolTag:
      return new Object(Boolean.prototype.valueOf.call(target));
    case numberTag:
      return new Object(Number.prototype.valueOf.call(target));
    case stringTag:
      return new Object(String.prototype.valueOf.call(target));
    case symbolTag:
      return new Object(Symbol.prototype.valueOf.call(target));
    case errorTag: 
    case dateTag:
      return new Ctor(target);
    case regexpTag:
      return handleRegExp(target);
    case funcTag:
      return handleFunc(target);
    default:
      return new Ctor(target);
  }
}

const deepClone = (target, map = new WeakMap()) => {
  if(!isObject(target)) 
    return target;
  let type = getType(target);
  let cloneTarget;
  if(!canTraverse[type]) {
    // å¤„ç†ä¸èƒ½éå†çš„å¯¹è±¡
    return handleNotTraverse(target, type);
  }else {
    // è¿™æ³¢æ“ä½œç›¸å½“å…³é”®ï¼Œå¯ä»¥ä¿è¯å¯¹è±¡çš„åŸå‹ä¸ä¸¢å¤±ï¼
    let ctor = target.constructor;
    cloneTarget = new ctor();
  }

  if(map.get(target)) 
    return target;
  map.set(target, true);

  if(type === mapTag) {
    //å¤„ç†Map
    target.forEach((item, key) => {
      cloneTarget.set(deepClone(key, map), deepClone(item, map));
    })
  }
  
  if(type === setTag) {
    //å¤„ç†Set
    target.forEach(item => {
      cloneTarget.add(deepClone(item, map));
    })
  }

  // å¤„ç†æ•°ç»„å’Œå¯¹è±¡
  for (let prop in target) {
    if (target.hasOwnProperty(prop)) {
        cloneTarget[prop] = deepClone(target[prop], map);
    }
  }
  return cloneTarget;
}

å¤åˆ¶ä»£ç 
```

[å‚è€ƒåšå®¢](https://juejin.cn/post/6844903986479251464#heading-56)

### å®ç°new

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­)

```js
function createObject(Con) {
    // åˆ›å»ºæ–°å¯¹è±¡obj
    // var obj = {};ä¹Ÿå¯ä»¥
    var obj = Object.create(null);

    // å°†obj.__proto__ -> æ„é€ å‡½æ•°åŸå‹
    // (ä¸æ¨è)obj.__proto__ = Con.prototype
    Object.setPrototypeOf(obj, Con.prototype);

    // æ‰§è¡Œæ„é€ å‡½æ•°ï¼Œå¹¶æ¥å—æ„é€ å‡½æ•°è¿”å›å€¼
    const ret = Con.apply(obj, [].slice.call(arguments, 1));

    // è‹¥æ„é€ å‡½æ•°è¿”å›å€¼ä¸ºå¯¹è±¡ï¼Œç›´æ¥è¿”å›è¯¥å¯¹è±¡
    // å¦åˆ™è¿”å›obj
    return typeof(ret) === 'object' ? ret: obj;
}
```

### ç»§æ‰¿

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­)

#### åŸå‹é“¾ç»§æ‰¿

#### å€Ÿç”¨æ„é€ å‡½æ•°(ç»å…¸ç»§æ‰¿)

#### ç»„åˆç»§æ‰¿

#### åŸå‹å¼ç»§æ‰¿

#### å¯„ç”Ÿå¼ç»§æ‰¿

#### å¯„ç”Ÿç»„åˆå¼ç»§æ‰¿

#### Classå®ç°ç»§æ‰¿(è¡¥å……ä¸€ä¸‹)

```js
class Animal {
    constructor(name) {
        this.name = name
    } 
    getName() {
        return this.name
    }
}
class Dog extends Animal {
    constructor(name, age) {
        super(name)
        this.age = age
    }
}
å¤åˆ¶ä»£ç 
```

[å‚è€ƒä»£ç ](https://juejin.cn/post/6844903477819211784)

### å®ç°object.create

```js
function newCreate(proto, propertiesObject) {
    if (typeof proto !== 'object' && typeof proto !== 'function') {
        throw TypeError('Object prototype may only be an Object: ' + proto)
    }
    function F() { }
    F.prototype = proto
    const o = new F()

    if (propertiesObject !== undefined) {
        Object.keys(propertiesObject).forEach(prop => {
            let desc = propertiesObject[prop]
            if (typeof desc !== 'object' || desc === null) {
                throw TypeError('Object prorotype may only be an Object: ' + desc)
            } else {
                Object.defineProperty(o, prop, desc)
            }
        })
    }

    return o
}
å¤åˆ¶ä»£ç 
```

## ğŸš‚ Functionç¯‡

### call

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­)

```js
Function.prototype.myCall = function (thisArg) {
    thisArg = thisArg || window;
    thisArg.func = this;
    const args = []
    for (let i = 1; i<arguments.length; i++) {
        args.push('arguments['+ i + ']')
    }
    const result = eval('thisArg.func(' + args +')')
    delete thisArg.func;
    return result;
}
å¤åˆ¶ä»£ç 
```

### bind

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­)

```js
Function.prototype.sx_bind = function (obj, ...args) {
    obj = obj || window

    const fn = Symbol()
    obj[fn] = this
    const _this = this

    const res = function (...innerArgs) {
        console.log(this, _this)
        if (this instanceof _this) {
            this[fn] = _this
            this[fn](...[...args, ...innerArgs])
            delete this[fn]
        } else {
            obj[fn](...[...args, ...innerArgs])
            delete obj[fn]
        }
    }
    res.prototype = Object.create(this.prototype)
    return res
}
å¤åˆ¶ä»£ç 
```

### apply

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­)

```js
Function.prototype.myApply = function (thisArg, arr) {
    thisArg = thisArg || window;
    thisArg.func = this;
    const args = []
    for (let i = 0; i<arr.length; i++) {
        args.push('arr['+ i + ']')
    }
    const result = eval('thisArg.func(' + args +')')
    delete thisArg.func;
    return result;
}
å¤åˆ¶ä»£ç 
```

### å®ç°æŸ¯é‡ŒåŒ–

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­)

[å‚è€ƒä»£ç ](https://juejin.cn/post/6844903490771222542)

### å®ç°é“¾å¼è°ƒç”¨

[å‚è€ƒä»£ç ](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzcxiaobao%2Feveryday-insist%2Fblob%2Fmaster%2F21interview%2Fimitate%2FchainFunc.md)

### åå‡½æ•°

[å‚è€ƒä»£ç ](https://juejin.cn/post/6946022649768181774#heading-17)

## ğŸŒ ajax ä¸ jsonp

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­)

### å®ç°ajax

```js
function ajax({
    url= null,
	method = 'GET',
	dataType = 'JSON',
	async = true}){
	return new Promise((resolve, reject) => {
		let xhr = new XMLHttpRequest()
		xhr.open(method, url, async)
		xhr.responseType = dataType
		xhr.onreadystatechange = () => {
			if(!/^[23]\d{2}$/.test(xhr.status)) return;
			if(xhr.readyState === 4) {
				let result = xhr.responseText
				resolve(result)
			}
		}
		xhr.onerror = (err) => {
			reject(err)
		}
		xhr.send()
	})
}
å¤åˆ¶ä»£ç 
```

### å®ç°jsonp

```js
const jsonp = ({ url, params, callbackName }) => {
    const generateUrl = () => {
        let dataSrc = ''
        for (let key in params) {
            if (params.hasOwnProperty(key)) {
                dataSrc += `${key}=${params[key]}&`
            }
        }
        dataSrc += `callback=${callbackName}`
        return `${url}?${dataSrc}`
    }
    return new Promise((resolve, reject) => {
        const scriptEle = document.createElement('script')
        scriptEle.src = generateUrl()
        document.body.appendChild(scriptEle)
        window[callbackName] = data => {
            resolve(data)
            document.removeChild(scriptEle)
        }
    })
}
å¤åˆ¶ä»£ç 
```

## ğŸ›« ES6ç¯‡

### å®ç°set

```js
class Set {
  constructor() {
    this.items = {};
    this.size = 0;
  }

  has(element) {
    return element in this.items;
  }

  add(element) {
    if(! this.has(element)) {
      this.items[element] = element;
      this.size++;
    }
    return this;
  }

  delete(element) {
    if (this.has(element)) {
      delete this.items[element];
      this.size--;
    }
    return this;
  }

  clear() {
    this.items = {}
    this.size = 0;
  }

  values() {
    let values = [];
    for(let key in this.items) {
      if(this.items.hasOwnProperty(key)) {
        values.push(key);
      }
    }
    return values;
  }
}
å¤åˆ¶ä»£ç 
```

### å®ç° map

```js
function defaultToString(key) {
  if(key === null) {
    return 'NULL';
  } else if (key === undefined) {
    return 'UNDEFINED'
  } else if (Object.prototype.toString.call(key) === '[object Object]' || Object.prototype.toString.call(key) === '[object Array]') {
    return JSON.stringify(key);
  }
  return key.toString();
}

class Map {
  constructor() {
    this.items = {};
    this.size = 0;
  }

  set(key, value) {
    if(!this.has(key)) {
      this.items[defaultToString(key)] = value;
      this.size++;
    }
    return this;
  }

  get(key) {
    return this.items[defaultToString(key)];
  }

  has(key) {
    return this.items[defaultToString(key)] !== undefined;
  }

  delete(key) {
    if (this.has(key)) {
      delete this.items[key];
      this.size--;
    }
    return this;
  }

  clear() {
    this.items = {}
    this.size = 0;
  }

  keys() {
    let keys = [];
    for(let key in this.items) {
      if(this.has(key)) {
        keys.push(key)
      }
    }
    return keys;
  }

  values() {
    let values = [];
    for(let key in this.items) {
      if(this.has(key)) {
        values.push(this.items[key]);
      }
    }
    return values;
  }
}
å¤åˆ¶ä»£ç 
```

### å®ç°es6çš„class

[å‚è€ƒä»£ç ](https://link.juejin.cn?target=https%3A%2F%2Fzhuanlan.zhihu.com%2Fp%2F56599517)

## ğŸ¦‰ å…¶ä»–

### instanceof

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­â­)

```js
function instance_of(Case, Constructor) {
    // åŸºæœ¬æ•°æ®ç±»å‹è¿”å›false
    // å…¼å®¹ä¸€ä¸‹å‡½æ•°å¯¹è±¡
    if ((typeof(Case) != 'object' && typeof(Case) != 'function') || Case == 'null') return false;
    let CaseProto = Object.getPrototypeOf(Case);
    while (true) {
        // æŸ¥åˆ°åŸå‹é“¾é¡¶ç«¯ï¼Œä»æœªæŸ¥åˆ°ï¼Œè¿”å›false
        if (CaseProto == null) return false;
        // æ‰¾åˆ°ç›¸åŒçš„åŸå‹
        if (CaseProto === Constructor.prototype) return true;
        CaseProto = Object.getPrototypeOf(CaseProto);
    }
}
å¤åˆ¶ä»£ç 
```

### å®ç°åƒåˆ†ä½åˆ†éš”ç¬¦

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­)

```js
var str = "100000000000",
    reg = /(?=(\B\d{3})+$)/g;
str.replace(reg, ",")
å¤åˆ¶ä»£ç 
```

### æŠŠä¸€ä¸ªJSONå¯¹è±¡çš„keyä»ä¸‹åˆ’çº¿å½¢å¼ï¼ˆPascalï¼‰è½¬æ¢åˆ°å°é©¼å³°å½¢å¼ï¼ˆCamelï¼‰

è€ƒå¯Ÿé¢‘ç‡: (â­â­â­)

[å‚è€ƒä»£ç ](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Fzcxiaobao%2Feveryday-insist%2Fblob%2Fmaster%2F21interview%2FbaseJS%2F_tocamel.md)

### å®ç°æ•°æ®ç±»å‹åˆ¤æ–­å‡½æ•°

```js
function myTypeof(obj) {
   return Object.prototype.toString.call(obj).slice(8, -1).toLowerCase() 
}
å¤åˆ¶ä»£ç 
```

### å®ç°æ•°ç»„è½¬æ ‘

[å‚è€ƒä»£ç ](https://link.juejin.cn?target=https%3A%2F%2Fgithub.com%2Flgwebdream%2FFE-Interview%2Fissues%2F35)

### å®ç°sleepå‡½æ•°

```js
// promise
const sleep = time => {
  return new Promise(resolve => setTimeout(resolve,time))
}
sleep(1000).then(()=>{
  console.log(1)
})
// ES5
function sleep(callback,time) {
  if(typeof callback === 'function')
    setTimeout(callback,time)
}

function output(){
  console.log(1);
}
sleep(output,1000);

å¤åˆ¶ä»£ç 
```

### å®ç°å‘å¸ƒè®¢é˜…æ¨¡å¼

```js
class EventEmitter {
    constructor() {
        this.cache = {}
    }
    on(name, fn) {
        if (this.cache[name]) {
            this.cache[name].push(fn)
        } else {
            this.cache[name] = [fn]
        }
    }
    off(name, fn) {
        let tasks = this.cache[name]
        if (tasks) {
            const index = tasks.findIndex(f => f === fn || f.callback === fn)
            if (index >= 0) {
                tasks.splice(index, 1)
            }
        }
    }
    emit(name, once = false, ...args) {
        if (this.cache[name]) {
            // åˆ›å»ºå‰¯æœ¬ï¼Œå¦‚æœå›è°ƒå‡½æ•°å†…ç»§ç»­æ³¨å†Œç›¸åŒäº‹ä»¶ï¼Œä¼šé€ æˆæ­»å¾ªç¯
            let tasks = this.cache[name].slice()
            for (let fn of tasks) {
                fn(...args)
            }
            if (once) {
                delete this.cache[name]
            }
        }
    }
}
```

