# react ç»„ä»¶ç”Ÿå‘½å‘¨æœŸ

**å¸¸ç”¨ç”Ÿå‘½å‘¨æœŸå›¾è°±ï¼š**

![image-20220812181235316](../../../assets/react/image-20220812181235316.png)

**å±•ç¤ºä¸å¸¸ç”¨ç”Ÿå‘½å‘¨æœŸå›¾è°±ï¼š**

![image-20220812181353550](../../../assets/react/image-20220812181353550.png)

## æŒ‚è½½

å½“ç»„ä»¶å®ä¾‹è¢«åˆ›å»ºå¹¶æ’å…¥ DOM ä¸­æ—¶ï¼Œå…¶ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š

- **`constructor()`**
- `static getDerivedStateFromProps()`
- **`render()`**
- **`componentDidMount()`**

### render()

> `render()` æ–¹æ³•æ˜¯ class ç»„ä»¶ä¸­å”¯ä¸€å¿…é¡»å®ç°çš„æ–¹æ³•ã€‚

å½“ `render` è¢«è°ƒç”¨æ—¶ï¼Œå®ƒä¼šæ£€æŸ¥ `this.props` å’Œ `this.state` çš„å˜åŒ–å¹¶è¿”å›ä»¥ä¸‹ç±»å‹ä¹‹ä¸€ï¼š

* **React å…ƒç´ **

* **æ•°ç»„æˆ– fragments**

  ä½¿å¾— render æ–¹æ³•å¯ä»¥è¿”å›å¤šä¸ªå…ƒç´ ã€‚ğŸ‘‰ğŸ»å‚é˜… [fragments](https://zh-hans.reactjs.org/docs/fragments.html) æ–‡æ¡£

* **Portals**

  å¯ä»¥æ¸²æŸ“å­èŠ‚ç‚¹åˆ°ä¸åŒçš„ DOM å­æ ‘ä¸­ã€‚ğŸ‘‰ğŸ»å‚é˜… [portals](https://zh-hans.reactjs.org/docs/portals.html) æ–‡æ¡£

* **å­—ç¬¦ä¸²æˆ–æ•°å€¼ç±»å‹**

  å®ƒä»¬åœ¨ DOM ä¸­ä¼šè¢«æ¸²æŸ“ä¸ºæ–‡æœ¬èŠ‚ç‚¹ã€‚

* **å¸ƒå°”ç±»å‹æˆ– `null`**ã€‚

  ä»€ä¹ˆéƒ½ä¸æ¸²æŸ“ã€‚ï¼ˆä¸»è¦ç”¨äºæ”¯æŒè¿”å› `test && <Child />` çš„æ¨¡å¼ï¼Œå…¶ä¸­ test ä¸ºå¸ƒå°”ç±»å‹ã€‚)

**æ³¨æ„ğŸ“¢**ï¼š

1. `render()` å‡½æ•°åº”è¯¥ä¸ºçº¯å‡½æ•°ï¼Œè¿™æ„å‘³ç€åœ¨ä¸ä¿®æ”¹ç»„ä»¶ state çš„æƒ…å†µä¸‹ï¼Œæ¯æ¬¡è°ƒç”¨æ—¶éƒ½è¿”å›ç›¸åŒçš„ç»“æœï¼Œå¹¶ä¸”å®ƒä¸ä¼šç›´æ¥ä¸æµè§ˆå™¨äº¤äº’ã€‚

2. å¦‚éœ€ä¸æµè§ˆå™¨è¿›è¡Œäº¤äº’ï¼Œè¯·åœ¨ `componentDidMount()` æˆ–å…¶ä»–ç”Ÿå‘½å‘¨æœŸæ–¹æ³•ä¸­æ‰§è¡Œä½ çš„æ“ä½œã€‚
3. å¦‚æœ `shouldComponentUpdate()` è¿”å› **false**ï¼Œåˆ™ä¸ä¼šè°ƒç”¨ `render()`ã€‚

## æ›´æ–°

å½“ç»„ä»¶çš„ **props** æˆ– **state** å‘ç”Ÿå˜åŒ–æ—¶ä¼šè§¦å‘æ›´æ–°ã€‚ç»„ä»¶æ›´æ–°çš„ç”Ÿå‘½å‘¨æœŸè°ƒç”¨é¡ºåºå¦‚ä¸‹ï¼š

- `static getDerivedStateFromProps()`
- `shouldComponentUpdate()`
- **`render()`**
- `getSnapshotBeforeUpdate()`
- **`componentDidUpdate()`**

## å¸è½½

å½“ç»„ä»¶ä» DOM ä¸­ç§»é™¤æ—¶ä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼š

- **`componentWillUnmount()`**

## é”™è¯¯å¤„ç†

å½“æ¸²æŸ“è¿‡ç¨‹ï¼Œç”Ÿå‘½å‘¨æœŸï¼Œæˆ–å­ç»„ä»¶çš„æ„é€ å‡½æ•°ä¸­æŠ›å‡ºé”™è¯¯æ—¶ï¼Œä¼šè°ƒç”¨å¦‚ä¸‹æ–¹æ³•ï¼š

- `static getDerivedStateFromError()`
- `componentDidCatch()`

## å…¶ä»– APIs

ç»„ä»¶è¿˜æä¾›äº†ä¸€äº›é¢å¤–çš„ APIï¼š

- `setState()`
- `forceUpdate()`

## class å±æ€§

- `defaultProps`
- `displayName`

## å®ä¾‹å±æ€§

- `props`
- `state`