> æ ¸å¿ƒæ˜¯ç”Ÿäº§å¯¹è±¡ï¼Œå®ç°è§£è€¦

## ç²—ç²’åº¦ç®€å•å·¥å‚ğŸ­

```js
/**
 * æ­å»ºä¸€ä¸ªå·¥å‚çš„ç¯å¢ƒ
 */

// å–è½¦çš„å•†åº—
function CarShop(){};
CarShop.prototype = {
  constructor: CarShop,
  sellCar: function(type) {
   return CarFactory.createCar(type);
  }
};

// ç”Ÿäº§è½¦çš„å·¥å‚,ç›®çš„å°±æ˜¯ä¸ºäº†ç”Ÿäº§è½¦
// å•ä¾‹æ¨¡å¼(ä¸èƒ½è¢«newå…³é”®å­—å®ä¾‹åŒ–)
const CarFactory = {
  createCar: function(type) {
    let car;
    switch(type) {
      case 'Benz': car = new Benz(); break;
      case 'Bmw': car = new Bmw(); break;
      case 'Audi': car = new Audi(); break;
      default: 'not buy it';
    }
    BH.interface.ensureImplements(car, CarInterface); // éªŒè¯æ˜¯å¦å®ç°äº†å…·ä½“çš„æ–¹æ³•
    return car;
  }
}


// æ¥å£å¯¹è±¡çš„ç¤ºä¾‹
const CarInterface = new BH.interface('CarInterface', ['statr', 'run'])

// SuperClass 
function BaseCar(){};
BaseCar.prototype = {
  constructor: BaseCar,
  start: function(){
    alert(this.constructor.name + "start")
  },
  run: function() {
    alert(this.constructor.name + "run...")
  }
}

// Class benz bmw audi (éƒ½æ˜¯è½¦)
// æ³¨æ„å…³é”®é—®é¢˜ï¼šå­ç±»å…ˆç»§æ‰¿çˆ¶ç±» å­ç±»åœ¨æ‰©å±•å­ç±»è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•
function Benz(){}; 
// Benz.prototype.driveBenz = function(){alert('Benz..drive')}; 
// Benz.prototype.run = function(){alert('Benz..run')};
BH.extend(Benz,BaseCar); 
Benz.prototype.driveBenz = function(){alert('Benz..drive')}; 

function Bmw(){};
// Bmw.prototype.driveBmw = function(){alert('Bmw..drive')};
// Bmw.prototype.run = function(){alert('Bmw..run')};	
BH.extend(Bmw,BaseCar);
Bmw.prototype.driveBmw = function(){alert('Bmw..drive')};

function Audi(){};
// Audi.prototype.driveAudi = function(){alert('Audi..drive')};
// Audi.prototype.run = function(){alert('Audi..run')};	
BH.extend(Audi,BaseCar);
Audi.prototype.driveAudi = function(){alert('Audi..drive')};

const shop = new CarShop();
const car = shop.sellCar('Benz');
car.start();
car.run();
car.driveBenz();
```

## ç»†ç²’åº¦ç®€å•å·¥å‚ğŸ­

```js
function CarShop(){};// æŠ½è±¡ç±»
CarShop.prototype = {
  constructor : CarShop ,
  sellCar:function(type){
    // é”€å”®äººå‘˜...
    // var car = CarFactory.createCar(type);
    // ä¿é™©ã€ç›¸å…³çš„å”®åæœåŠ¡
    //return car ;
    this.abstractSellCar(type);
  } ,
  abstractSellCar: function(){
    throw new Error('this method is abstract...');
  }
};

// Benz 4s åº— ç»§æ‰¿æŠ½è±¡ç±»ï¼Œå®ç°å…·ä½“æ–¹æ³•
function BenzCarShop(){};
BH.extend(BenzCarShop,CarShop); 
BenzCarShop.prototype = {
  constructor: BenzCarShop,
  sellCar: function(type) {
    let car ; // å£°æ˜ä¸€ä¸ªå˜é‡
    let types = ['Benz'];	//æ‰€æœ‰benzç±»å‹çš„æ±½è½¦
    for(t in types){
      // å¦‚æœæˆ‘çš„å•†åº—é‡Œæœ‰ä½ æƒ³è¦æ±½è½¦å‹å·
      if(types[t] === type){
        car = CarFactory.createCar(type);
      } else { 
        alert('æ²¡æœ‰ä½ è¦çš„å‹å·!');
      }
    }
    return car ;
  }
}
// å®é©¬  4s åº— 
function BmwCarShop(){};
BH.extend(BmwCarShop,CarShop);
BmwCarShop.prototype = {
  constructor:BmwCarShop ,
  sellCar:function(type){
    var car ; // å£°æ˜ä¸€ä¸ªå˜é‡
    var types = ['Bmw'];	//æ‰€æœ‰bmwç±»å‹çš„æ±½è½¦
    for(t in types){
      // å¦‚æœæˆ‘çš„å•†åº—é‡Œæœ‰ä½ æƒ³è¦æ±½è½¦å‹å·
      if(types[t] === type){
        car = CarFactory.createCar(type);
      } else { 
        alert('æ²¡æœ‰ä½ è¦çš„å‹å·!');
      }
    }
    return car ;
  }					
};	

//ç”Ÿäº§è½¦çš„å·¥å‚ ç›®çš„å°±æ˜¯ä¸ºäº†ç”Ÿäº§è½¦
//å•ä½“æ¨¡å¼ åŠ¨æ€å·¥å‚æ¨¡å¼
const CarFactory = {
  createCar: function(type){
    // var car = new Benz();
    // åˆ©ç”¨evalåŠ¨æ€åˆ›å»ºä¼ å…¥ç±»å‹çš„å®ä¾‹å¯¹è±¡
    var car = eval('new '+type+'()');
    //æ£€éªŒæ¥å£å®ç°
    BH.Interface.ensureImplements(car ,CarInterface);
    return car ;						
  }
};

// æ¥å£å¯¹è±¡çš„å®ä¾‹
var CarInterface = new BH.Interface('CarInterface' ,['start','run']);

// SuperClass  implements CarInterface 
function BaseCar(){};
BaseCar.prototype = {
  constructor:BaseCar , 
  start:function(){
    alert(this.constructor.name + ' ..start');
  },
  run:function(){
    alert(this.constructor.name + ' ..run');
  }
};


// Class benz bmw audi (éƒ½æ˜¯è½¦)
// æ³¨æ„å…³é”®é—®é¢˜ï¼šå­ç±»å…ˆç»§æ‰¿çˆ¶ç±» å­ç±»åœ¨æ‰©å±•å­ç±»è‡ªå·±ç‰¹æœ‰çš„æ–¹æ³•

function Benz(){}; 
BH.extend(Benz,BaseCar); 
Benz.prototype.driveBenz = function(){alert('Benz..drive')}; 
//Benz.prototype.run = function(){alert('Benz..run')};

function Bmw(){};
BH.extend(Bmw,BaseCar);
Bmw.prototype.driveBmw = function(){alert('Bmw..drive')};
//Bmw.prototype.run = function(){alert('Bmw..run')};	

function Audi(){};
BH.extend(Audi,BaseCar);
Audi.prototype.driveAudi = function(){alert('Audi..drive')};
//Audi.prototype.run = function(){alert('Audi..run')};	
var shop1 = new BenzCarShop();
var car1 = shop1.sellCar('Benz');
car1.run();

var shop2 = new BmwCarShop();
var car2 = shop2.sellCar('Bmw');
car2.run();
```



